<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ANC Demo</title>
</head>
<body>
  <button id="startBtn">Start ANC</button>
  <script>
    let audioCtx;
    document.getElementById("startBtn").onclick = async () => {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      const source = audioCtx.createMediaStreamSource(stream);

      const inverter = audioCtx.createGain();
      inverter.gain.value = -1;  // 反相

      source.connect(inverter).connect(audioCtx.destination);
      console.log("ANC started");
    };
  </script>
</body>
</html>
